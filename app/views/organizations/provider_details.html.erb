<%= render 'shared/organization_header' %>

<div class="container manage-organization-container">
    <%= render 'shared/manage_organization_header' %>

    <h3>Provider details</h3>

    <!-- Admin/owner view: -->
    <% if can? :manage, @organization %>
        <%= bootstrap_form_with(model: @organization, local: true) do |form| %>
            <%= render 'provider_details_form', organization: @organization, form: form %>
            <div class="actions">
                <%= form.primary 'Update provider details' %>
            </div>
        <% end %>

    <!-- Member view: -->
    <% else %>
    <dl class="organization-details mt-4">
        <dt>
            <h4>What MARC field contains item-level information?</h4>
            <p class="<%= @organization.normalization_steps.values.dig(0, 'source_tag').blank? ? 'fst-italic' : '' %>">
                <%= @organization.normalization_steps.values.dig(0, 'source_tag').blank? ? 'no value provided' : @organization.normalization_steps.values.dig(0, 'source_tag') %>
            </p>
        </dt>
        <dt>
            <h4>Local identifier subfield</h4>
            <p class="<%= @organization.normalization_steps.values.dig(0, 'subfields', 'i').blank? ? 'fst-italic' : '' %>"><%= @organization.normalization_steps.values.dig(0, 'subfields', 'i').blank? ? 'no value provided' : @organization.normalization_steps.values.dig(0, 'subfields', 'i') %></p>
        </dt>
        <dt>
            <h4>Call number subfield</h4>
            <p class="<%= @organization.normalization_steps.values.dig(0, 'subfields', 'a').blank? ? 'fst-italic' : '' %>"><%= @organization.normalization_steps.values.dig(0, 'subfields', 'a').blank? ? 'no value provided' : @organization.normalization_steps.values.dig(0, 'subfields', 'a')%></p>
        </dt>
        <dt>
            <h4>Local library</h4>
            <p class="<%= @organization.normalization_steps.values.dig(0, 'subfields', 'm').blank? ? 'fst-italic' : '' %>"><%= @organization.normalization_steps.values.dig(0, 'subfields', 'm').blank? ? 'no value provided' : @organization.normalization_steps.values.dig(0, 'subfields', 'm') %></p>
        </dt>
    </dl>
    <% end %>

</div>
